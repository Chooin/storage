"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),Storage=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,e),"[object String]"===this._type(t))this.defaults={use:t,pre:"",strict:!0,expire:null};else{if("[object Object]"!==this._type(t))throw new Error("Wrong storage option");this.defaults={use:t.use,pre:"[object String]"===this._type(t.pre)?t.pre:"",strict:"[object Boolean]"!==this._type(t.strict)||t.strict,expire:"[object Number]"===this._type(t.expire)?t.expire:null}}this.$ls=window.localStorage,this.$ss=window.sessionStorage,this.$s="s"===this.defaults.use&&"session"===this.defaults.use&&"sessionStorage"===this.defaults.use?this.$ss:this.$ls}return _createClass(e,[{key:"get",value:function(e){if(this._isDef(e))if(e=""+this.defaults.pre+e,this.defaults.strict){var t=this.$s.getItem(e);if(null===t)return null;try{return(t=JSON.parse(t)).expire&&t.expire>(new Date).getTime()||null===t.expire?t.data:(this.$s.removeItem(e),null)}catch(t){this.$s.removeItem(e),this._console("Wrong get storage")}}else try{return JSON.parse(this.$s.getItem(e))}catch(t){return this.$s.getItem(e)}else this._console("Wrong get storage")}},{key:"set",value:function(e,t){if(Array.isArray(e))for(var s in e)this._set(e[s].key,e[s].value);else this._set(e,t)}},{key:"remove",value:function(e){if(Array.isArray(e))for(var t in e)this._remove(e[t]);else this._remove(e)}},{key:"clear",value:function(){if(this.defaults.pre){for(var e=0;e<this.$ls.length;e++)0===this.$ls.key(e).indexOf(this.defaults.pre)&&this._remove(this.$ls.key(e));for(var t=0;t<this.$ss.length;t++)0===this.$ss.key(t).indexOf(this.defaults.pre)&&this._remove(this.$ss.key(t))}else this.$ss.clear(),this.$ls.clear()}},{key:"_set",value:function(e,t){this._isDef(e)?(e=""+this.defaults.pre+e,this._isDef(t)?this.defaults.strict?this.$s.setItem(e,JSON.stringify({data:t,expire:this.defaults.expire,type:this._type(t)})):"[object String]"===this._type(t)||"[object Number]"===this._type(t)?this.$s.setItem(e,t):this.$s.setItem(e,JSON.stringify(t)):this.$s.removeItem(e)):this._console("Wrong set storage")}},{key:"_remove",value:function(e){e?this.$s.removeItem(""+this.defaults.pre+e):this._console("Wrong remove storage")}},{key:"_type",value:function(e){return Object.prototype.toString.call(e)}},{key:"_console",value:function(e){"undefined"!=typeof console&&console.warn(e)}},{key:"_isDef",value:function(e){return void 0!==e&&null!==e}}]),e}();exports.default=Storage;